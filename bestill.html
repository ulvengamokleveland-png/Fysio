<!doctype html>
<html lang="no">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bestill time | Aasland klinikk</title>
  <meta name="description" content="Bestill time hos Aasland fysioterapi — fyll ut skjema og send forespørsel." />
  <style>
    :root{
      --accent:#2b7a78;
      --accent-2:#9ad3bc;
      --bg:#f7f9f9;
      --card:#ffffff;
      --muted:#6b7280;
      --radius:14px;
      --glass: rgba(255,255,255,0.6);
      font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;background:linear-gradient(180deg,var(--bg),#ffffff);color:#0f172a;line-height:1.5}
    header{backdrop-filter:blur(6px);position:sticky;top:0;z-index:40;background:rgba(255,255,255,0.7);border-bottom:1px solid rgba(15,23,42,0.04)}
    .container{max-width:1100px;margin:0 auto;padding:1rem}
    .nav{display:flex;align-items:center;justify-content:space-between;gap:1rem}

    .brand-link{display:flex;align-items:center;text-decoration:none;color:inherit;cursor:pointer;gap:0.5rem;}
    .logo-img{
      height:52px;
      object-fit:contain;
      border-radius:12px;
    }

    nav a{
      margin-left:1rem;
      color:inherit;
      text-decoration:none;
      font-weight:600;
      position:relative;
      transition:0.2s;
    }
    nav a::after{
      content:''; position:absolute; left:0; bottom:-2px; width:0%; height:2px; background:var(--accent-2); transition:width 0.2s ease;
    }
    nav a:hover{ color:var(--accent-2); }
    nav a:hover::after{ width:100%; }

    .header-social{
      display:flex; gap:0.6rem; align-items:center; margin-left:1rem;
    }
    .header-social a{
      display:flex; width:26px; height:26px; opacity:0.8; transition:0.2s;
    }
    .header-social a:hover{ opacity:1; transform:scale(1.1); }

    main{padding:2rem 0}
    section{margin:1.5rem 0}
    .card{background:var(--card);padding:1rem;border-radius:12px;box-shadow:0 6px 16px rgba(16,24,40,0.04)}

    .grid-2{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:1.5rem;
      align-items:start; /* endret fra center til start */
    }
    @media(max-width:800px){ .grid-2{grid-template-columns:1fr;} }

    .ansatt-bilde{ width:100%; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.05); }

    form label{display:block;font-weight:600;margin:0.5rem 0 0.25rem}
    input,textarea,select{width:100%;padding:.6rem;border:1px solid rgba(15,23,42,0.08);border-radius:10px;font-size:1rem}
    button{background:var(--accent);color:white;padding:.7rem 1rem;border-radius:10px;border:0;font-weight:700;cursor:pointer}
    .muted{color:var(--muted)}
    .date-hint{font-size:0.85rem;color:var(--accent-2);margin-top:0.25rem}

    footer{padding:2rem 0;color:var(--muted)}
    .footer-right{display:flex;align-items:center;gap:1rem;flex-wrap:wrap;}
    .footer-social{display:flex;gap:0.6rem;align-items:center;}
    .footer-social a{display:flex;width:26px;height:26px;opacity:0.8;transition:0.2s;}
    .footer-social a:hover{opacity:1;transform:scale(1.1);}
  </style>
</head>
<body>
  <header>
    <div class="container nav">
      <a href="indx.html" class="brand-link">
        <img src="Norgefysioterapi.png" alt="Norge Fysioterapi logo" class="logo-img">
        <div>
          <div style="font-weight:800">Aasland klinikk</div>
          <div style="font-size:.8rem;color:var(--muted)">Fysioterapi · Bevegelse · Bedring</div>
        </div>
      </a>
      <div style="display:flex;align-items:center;gap:1rem">
        <nav aria-label="Hovednavigasjon">
          <a href="tjenester.html">Tjenester</a>
          <a href="bestill.html">Bestill time</a>
          <a href="kontakt.html">Kontakt</a>
        </nav>
        <div class="header-social">
          <a href="https://www.instagram.com/daviddalehaugaasland/" target="_blank" aria-label="Instagram">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M7 2C4.2 2 2 4.2 2 7v10c0 2.8 2.2 5 5 5h10c2.8 0 5-2.2 5-5V7c0-2.8-2.2-5-5-5H7zm10 2c1.7 0 3 1.3 3 3v10c0 1.7-1.3 3-3 3H7c-1.7 0-3-1.3-3-3V7c0-1.7 1.3-3 3-3h10zm-5 3.5A5.5 5.5 0 006.5 13 5.5 5.5 0 0012 18.5 5.5 5.5 0 0017.5 13 5.5 5.5 0 0012 7.5zm0 2A3.5 3.5 0 0115.5 13 3.5 3.5 0 0112 16.5 3.5 3.5 0 018.5 13 3.5 3.5 0 0112 9.5zm4.8-3.3a1.2 1.2 0 100 2.4 1.2 1.2 0 000-2.4z"/>
            </svg>
          </a>
          <a href="https://www.facebook.com/help/668969529866328/" target="_blank" aria-label="Facebook">
            <svg viewBox="0 0 24 24" fill="currentColor">
              <path d="M22 12a10 10 0 10-11.5 9.9v-7H8v-3h2.5V9.5a3.5 3.5 0 013.7-3.9c1 0 2 .1 2 .1v2.3h-1.1c-1.1 0-1.4.7-1.4 1.3V12H18l-.5 3h-2.8v7A10 10 0 0022 12z"/>
            </svg>
          </a>
        </div>
      </div>
    </div>
  </header>

  <main class="container">

    <section class="card">
      <div class="grid-2">
        <div>
          <h2>Våre ansatte</h2>
          <p class="muted">
            Ved Aasland klinikk møter du et engasjert team med høy kompetanse innen fysioterapi,
            rehabilitering og forebyggende behandling.
          </p>
          <p class="muted">Sammen jobber vi for at du skal få en trygg og effektiv behandling.</p>
        </div>
        <div>
          <img src="GRUPPEBILDE.jpg" alt="Ansatte ved klinikken" class="ansatt-bilde">
        </div>
      </div>
    </section>

    <section>
      <div class="card">
        <h2>Bestill time</h2>

        <form id="bookingForm" novalidate>
          <label for="name">Navn</label>
          <input id="name" name="name" required />

          <label for="phone">Telefon</label>
          <input id="phone" name="phone" required />

          <label for="email">E-post</label>
          <input id="email" name="email" type="email" />

          <label for="service">Tjeneste</label>
          <select id="service" name="service">
            <option>Muskel- & leddbehandling</option>
            <option>Rehabilitering</option>
            <option>Forebygging & rådgivning</option>
          </select>

          <label for="date">Ønsket dato</label>
          <input id="date" name="date" type="date" />
          <div class="date-hint">Klikk på kalenderikonet for å velge dato</div>

          <label for="note">Tilleggsinfo</label>
          <textarea id="note" name="note" rows="4"></textarea>

          <div style="margin-top:0.6rem;display:flex;gap:.5rem">
            <button type="submit">Send forespørsel</button>
            <button id="clearBtn" type="button" style="background:#e6eef0;color:var(--accent);">Tøm</button>
          </div>
        </form>

        <div id="success" style="display:none;margin-top:1rem;background:#e8fdf3;border:1px solid #8ee4af;padding:1rem;border-radius:10px;color:#134e4a;font-weight:600;">
          Forespørselen er sendt!
        </div>

        <div id="message" aria-live="polite" style="margin-top:.8rem;color:var(--accent);font-weight:700"></div>

        <hr style="margin:1rem 0;border:none;border-top:1px solid rgba(15,23,42,0.04)" />
        <div style="font-size:.9rem" class="muted">Vi ringer opp for å bekrefte timen.</div>

        <div class="muted" style="font-size:.8rem;margin-top:1rem;">
          Sist oppdatert: <span id="lastEdit"></span>
        </div>
      </div>
    </section>

  </main>

  <footer>
    <div class="container">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:1rem;flex-wrap:wrap">
        <div>
          <strong>Aasland klinikk</strong>
          <div class="muted">© <span id="year"></span> Alle rettigheter</div>
        </div>
        <div class="footer-right">
          <div class="muted">Personvern · Vilkår</div>
          <div class="footer-social">
            <a href="https://www.instagram.com/daviddalehaugaasland/" target="_blank">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M7 2C4.2 2 2 4.2 2 7v10c0 2.8 2.2 5 5 5h10c2.8 0 5-2.2 5-5V7c0-2.8-2.2-5-5-5H7zm10 2c1.7 0 3 1.3 3 3v10c0 1.7-1.3 3-3 3H7c-1.7 0-3-1.3-3-3V7c0-1.7 1.3-3 3-3h10zm-5 3.5A5.5 5.5 0 006.5 13 5.5 5.5 0 0012 18.5 5.5 5.5 0 0017.5 13 5.5 5.5 0 0012 7.5zm0 2A3.5 3.5 0 0115.5 13 3.5 3.5 0 0112 16.5 3.5 3.5 0 018.5 13 3.5 3.5 0 0112 9.5zm4.8-3.3a1.2 1.2 0 100 2.4 1.2 1.2 0 000-2.4z"/>
              </svg>
            </a>
            <a href="https://www.facebook.com/help/668969529866328/" target="_blank">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M22 12a10 10 0 10-11.5 9.9v-7H8v-3h2.5V9.5a3.5 3.5 0 013.7-3.9c1 0 2 .1 2 .1v2.3h-1.1c-1.1 0-1.4.7-1.4 1.3V12H18l-.5 3h-2.8v7A10 10 0 0022 12z"/>
              </svg>
            </a>
          </div>
        </div>
      </div>
    </div>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();
    document.getElementById('lastEdit').textContent = new Date().toLocaleDateString("no-NO");

    const form = document.getElementById('bookingForm');
    const msg = document.getElementById('message');
    const successBox = document.getElementById('success');
    const clearBtn = document.getElementById('clearBtn');
    const dateInput = document.getElementById('date');
    const phoneInput = document.getElementById('phone');

    // (5) Dato kan ikke være tidligere enn i dag
    dateInput.min = new Date().toISOString().split("T")[0];

    // (6) Automatisk telefonformat
    phoneInput.addEventListener('input', () => {
      phoneInput.value = phoneInput.value
        .replace(/\D/g, "")
        .replace(/(.{2})/g, "$1 ")
        .trim();
    });

    function validateEmail(email){
      return /\S+@\S+\.\S+/.test(email);
    }

    form.addEventListener('submit', (e) => {
      e.preventDefault();
      msg.textContent = '';
      successBox.style.display = 'none';

      const data = Object.fromEntries(new FormData(form).entries());

      if(!data.name || !data.phone){
        msg.style.color = 'crimson';
        msg.textContent = 'Vennligst fyll ut navn og telefon.';
        return;
      }

      if(data.email && !validateEmail(data.email)){
        msg.style.color = 'crimson';
        msg.textContent = 'Oppgi en gyldig e-postadresse.';
        return;
      }

      if(!data.date){
        msg.style.color = 'crimson';
        msg.textContent = 'Velg en ønsket dato.';
        return;
      }

      // (7) Hindre duplikatbestilling
      const bookings = JSON.parse(localStorage.getItem('ft_bookings') || '[]');

      if (bookings.some(b => b.phone === data.phone && b.date === data.date)) {
        msg.style.color = 'crimson';
        msg.textContent = 'Du har allerede sendt forespørsel for denne datoen.';
        return;
      }

      bookings.push({ id: Date.now(), ...data, created: new Date().toISOString() });
      localStorage.setItem('ft_bookings', JSON.stringify(bookings));

      form.reset();
      msg.textContent = '';
      successBox.style.display = 'block';
      successBox.focus?.();
    });

    clearBtn.addEventListener('click', () => { 
      form.reset(); 
      msg.textContent = ''; 
      successBox.style.display = 'none';
    });

    dateInput.addEventListener('keydown', e => e.preventDefault());
  </script>
</body>
</html>
